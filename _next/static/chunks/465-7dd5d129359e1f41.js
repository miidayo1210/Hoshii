"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465],{483:function(e,t,l){l.d(t,{default:function(){return a}});var o=l(4673),n=l(2763);function a(e){let{children:t,onClick:l,className:a="",disabled:r,icon:i,full:F,as:c="button",href:s}=e;return(0,o.jsx)(n.E.div,{className:"inline-block ".concat(F?"w-full":""),whileTap:{scaleX:.96,scaleY:.9},transition:{type:"spring",stiffness:600,damping:20},children:(0,o.jsxs)(c,{href:s,onClick:l,disabled:r,className:"relative rounded-full px-5 py-3 text-[15px] font-semibold text-white\n          bg-gradient-to-r from-[var(--yk-accent)] to-[var(--yk-accent-2)]\n          shadow-[0_10px_20px_rgba(179,136,255,0.3)]\n          hover:brightness-110 active:brightness-95\n          ".concat(F?"w-full text-center":"","\n          ").concat(r?"opacity-60 pointer-events-none":"","\n          ").concat(a),children:[(0,o.jsx)("span",{className:"absolute inset-0 rounded-full",style:{boxShadow:"inset 0 -6px 12px rgba(0,0,0,0.08)"}}),(0,o.jsxs)("span",{className:"relative flex items-center justify-center gap-2",children:[i,t]})]})})}},5544:function(e,t,l){l.d(t,{default:function(){return a}});var o=l(4673),n=l(6739);function a(e){let{density:t=220}=e,l=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=l.current,t=Math.min(2,window.devicePixelRatio||1),o=e.getContext("2d"),n=0,a=0,r=0,i=0,F=[],c=[];function s(){a=e.clientWidth,r=e.clientHeight,e.width=a*t,e.height=r*t,o.setTransform(t,0,0,t,0,0)}s();let f=()=>s();window.addEventListener("resize",f);let d=[],h=[{name:"カエル",stars:[{x:.3,y:.4,r:2.5,color:"#FFFFFF"},{x:.35,y:.45,r:2.5,color:"#FFFFFF"},{x:.4,y:.5,r:2.5,color:"#FFFFFF"},{x:.28,y:.38,r:2,color:"#FFFFFF"},{x:.32,y:.38,r:2,color:"#FFFFFF"},{x:.25,y:.5,r:2.2,color:"#FFFFFF"},{x:.45,y:.5,r:2.2,color:"#FFFFFF"},{x:.25,y:.6,r:2.2,color:"#FFFFFF"},{x:.45,y:.6,r:2.2,color:"#FFFFFF"}],connections:[[0,1],[1,2],[0,3],[0,4],[1,5],[1,6],[2,7],[2,8]]},{name:"北斗七星",stars:[{x:.2,y:.3,r:2.5,color:"#FFFFFF"},{x:.25,y:.35,r:2.3,color:"#FFFFFF"},{x:.3,y:.4,r:2.3,color:"#FFFFFF"},{x:.35,y:.45,r:2.7,color:"#FFFFFF"},{x:.4,y:.5,r:2.3,color:"#FFFFFF"},{x:.45,y:.45,r:2.3,color:"#FFFFFF"},{x:.5,y:.4,r:2.3,color:"#FFFFFF"}],connections:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]]},{name:"オリオン座",stars:[{x:.3,y:.2,r:2.5,color:"#FFFFFF"},{x:.5,y:.2,r:2.5,color:"#FFFFFF"},{x:.35,y:.35,r:2.3,color:"#FFFFFF"},{x:.4,y:.35,r:2.3,color:"#FFFFFF"},{x:.45,y:.35,r:2.3,color:"#FFFFFF"},{x:.3,y:.5,r:2.3,color:"#FFFFFF"},{x:.5,y:.5,r:2.3,color:"#FFFFFF"}],connections:[[0,2],[1,4],[2,3],[3,4],[2,5],[4,6]]},{name:"ハート",stars:[{x:.35,y:.3,r:2.3,color:"#FFFFFF"},{x:.45,y:.3,r:2.3,color:"#FFFFFF"},{x:.4,y:.4,r:2.3,color:"#FFFFFF"},{x:.4,y:.5,r:2.3,color:"#FFFFFF"},{x:.4,y:.6,r:2.3,color:"#FFFFFF"}],connections:[[0,2],[1,2],[2,3],[3,4]]}];(async function(){try{let[e,t]=await Promise.all([fetch("/api/leapday/stats"),fetch("/api/leapday/comments?limit=200")]),l=await e.json(),o=await t.json();i=l.total||0,d=o.items||[]}catch(e){console.log("Failed to fetch star data:",e),i=0,d=[]}})().then(()=>(function(){F.length=0;let e=Math.min(500,5+i);for(let t=0;t<e;t++){let e="#fff",l="";if(t>=5){let o=d[t-5];o&&o.action_key?(e=o.action_key.includes("support_message")||o.action_key.includes("memory_ibaraki")||o.action_key.includes("what_student_like")||o.action_key.includes("thanks_parents")?"#FFFF00":"#FF6B6B",l=o.name||"匿名"):(e="#FFFF00",l="匿名")}F.push({x:Math.random()*a,y:Math.random()*r,r:2.5*Math.random()+1.5,tw:Math.random()*Math.PI*2,color:e,name:l})}let t=Math.floor(i/30);for(let e=0;e<t;e++){let t=h[e%h.length],l=e%3*.3,o=.4*Math.floor(e/3);t.stars.forEach((n,i)=>{F.push({x:(n.x+l)*a,y:(n.y+o)*r,r:n.r,tw:Math.random()*Math.PI*2,color:n.color,name:"".concat(t.name,"星座").concat(e+1,"の星").concat(i+1),isConstellation:!0,constellationIndex:e,starIndex:i,constellationName:t.name,connections:t.connections})})}})());let y=0,x=0,p=0,m=0,u=null,b=null,g=t=>{let l=t.clientX/a-.5,o=t.clientY/r-.5;p=8*l,m=6*o;let n=t.clientX-e.offsetLeft,i=t.clientY-e.offsetTop;for(let e of(u=null,F)){let t=n-e.x,l=i-e.y;if(Math.sqrt(t*t+l*l)<3*e.r&&e.name){u={x:e.x,y:e.y,name:e.name};break}}b&&(u?(b.textContent=u.name,b.style.left=t.clientX+10+"px",b.style.top=t.clientY-30+"px",b.style.display="block"):b.style.display="none")};window.addEventListener("mousemove",g);let v=0;function w(e,t,l,n){let a=o.createRadialGradient(e,t,0,e,t,l);a.addColorStop(0,n),a.addColorStop(1,"rgba(0,0,0,0)"),o.fillStyle=a,o.beginPath(),o.arc(e,t,l,0,2*Math.PI),o.fill()}return(b=document.createElement("div")).style.position="fixed",b.style.background="rgba(0,0,0,0.8)",b.style.color="white",b.style.padding="4px 8px",b.style.borderRadius="4px",b.style.fontSize="12px",b.style.pointerEvents="none",b.style.zIndex="1000",b.style.display="none",document.body.appendChild(b),n=requestAnimationFrame(function e(t){n=requestAnimationFrame(e),y+=(p-y)*.04,x+=(m-x)*.04;let l=o.createLinearGradient(0,0,a,r);l.addColorStop(0,"#0b1020"),l.addColorStop(1,"#141a38"),o.fillStyle=l,o.fillRect(0,0,a,r),w(.2*a+y,.3*r+x,260,"rgba(179,136,255,0.25)"),w(.8*a-y,.2*r+x,220,"rgba(139,227,255,0.22)"),w(.5*a+.5*y,.9*r-x,300,"rgba(255,209,232,0.18)");let i=F.filter(e=>e.isConstellation),s=new Map;for(let e of(i.forEach(e=>{void 0!==e.constellationIndex&&(s.has(e.constellationIndex)||s.set(e.constellationIndex,[]),s.get(e.constellationIndex).push(e))}),s.forEach((e,l)=>{let n=e[0];if(!n||!n.connections)return;let i=o.createLinearGradient(0,0,a,r);i.addColorStop(0,"rgba(255, 255, 255, 0.9)"),i.addColorStop(.3,"rgba(179, 136, 255, 0.8)"),i.addColorStop(.6,"rgba(139, 227, 255, 0.7)"),i.addColorStop(1,"rgba(255, 209, 232, 0.6)"),n.connections.forEach(n=>{let[a,r]=n,i=e[a],F=e[r];if(i&&F){let e=i.x+.4*y,n=i.y+.4*x,a=F.x+.4*y,r=F.y+.4*x;for(let t=3;t>=1;t--)o.strokeStyle="rgba(255, 255, 255, ".concat(.1*t,")"),o.lineWidth=2*t,o.globalAlpha=.3,o.beginPath(),o.moveTo(e,n),o.lineTo(a,r),o.stroke();o.strokeStyle="rgba(255, 255, 255, 0.8)",o.lineWidth=1.5,o.globalAlpha=.9,o.beginPath(),o.moveTo(e,n),o.lineTo(a,r),o.stroke(),o.strokeStyle="rgba(255, 255, 255, ".concat(.3*(.5*Math.sin(.01*t+l)+.5),")"),o.lineWidth=.5,o.globalAlpha=.6,o.beginPath(),o.moveTo(e,n),o.lineTo(a,r),o.stroke()}})}),F)){e.tw+=.03+.01*Math.random();let t=.5*Math.sin(e.tw)+.5;if(e.isConstellation){let l=e.x+.4*y,n=e.y+.4*x,a=e.r*(.8+.4*t);for(let r=4;r>=1;r--){let i=a+2*r,F=(.15-.03*r)*t;o.globalAlpha=F,o.fillStyle=e.color||"#fff",o.beginPath(),o.arc(l,n,i,0,2*Math.PI),o.fill()}o.globalAlpha=.9+.1*t,o.fillStyle=e.color||"#fff",o.beginPath(),o.arc(l,n,a,0,2*Math.PI),o.fill(),o.globalAlpha=1,o.fillStyle="#ffffff",o.beginPath(),o.arc(l,n,.3*a,0,2*Math.PI),o.fill()}else{let l=e.x+.4*y,n=e.y+.4*x,a=e.r*(.8+.4*t);if(e.color&&"#fff"!==e.color){for(let r=3;r>=1;r--){let i=a+1.5*r,F=(.12-.03*r)*t;o.globalAlpha=F,o.fillStyle=e.color,o.beginPath(),o.arc(l,n,i,0,2*Math.PI),o.fill()}o.globalAlpha=.8+.2*t,o.fillStyle=e.color,o.beginPath(),o.arc(l,n,a,0,2*Math.PI),o.fill(),o.globalAlpha=1,o.fillStyle="#ffffff",o.beginPath(),o.arc(l,n,.4*a,0,2*Math.PI),o.fill()}else o.globalAlpha=.7+.3*t,o.fillStyle=e.color||"#fff",o.beginPath(),o.arc(l,n,a,0,2*Math.PI),o.fill()}}o.globalAlpha=1,(v+=1)%160==0&&function(){let e=Math.random()*r*.6,t=Math.random()*a,l=6+4*Math.random();c.push({x:t,y:e,vx:-l,vy:.35*l,life:1})}();for(let e=c.length-1;e>=0;e--){let t=c[e],l=o.createLinearGradient(t.x,t.y,t.x-6*t.vx,t.y-6*t.vy);l.addColorStop(0,"rgba(255,255,255,0.9)"),l.addColorStop(1,"rgba(255,255,255,0)"),o.strokeStyle=l,o.lineWidth=2,o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(t.x-6*t.vx,t.y-6*t.vy),o.stroke(),o.fillStyle="#fff",o.beginPath(),o.arc(t.x,t.y,1.6,0,2*Math.PI),o.fill(),t.x+=t.vx,t.y+=t.vy,t.life-=.01,(t.x<-50||t.y>r+50||t.life<=0)&&c.splice(e,1)}}),()=>{cancelAnimationFrame(n),window.removeEventListener("resize",f),window.removeEventListener("mousemove",g),b&&b.parentNode&&b.parentNode.removeChild(b)}},[]),(0,o.jsxs)("div",{className:"relative w-full h-[46vh] md:h-[56vh] rounded-2xl overflow-hidden yk-glow",children:[(0,o.jsx)("canvas",{ref:l,className:"w-full h-full block"}),(0,o.jsx)("div",{className:"pointer-events-none absolute inset-0 yk-halo"})]})}}}]);