(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{7048:function(e,t,s){Promise.resolve().then(s.bind(s,1348))},1348:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(7437),i=s(2265),r=s(7440);let n=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});n.displayName="Card",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...i})}).displayName="CardHeader",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})}).displayName="CardTitle",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...i})}).displayName="CardDescription";let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...i})});o.displayName="CardContent";let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...i})});l.displayName="CardFooter";var d=s(1513);function c(e){let{stamps:t,userName:s}=e,i=Math.min(t,20);return(0,a.jsx)(n,{className:"kawaii-card bg-gradient-to-br from-hoshii-sand via-hoshii-mint to-hoshii-sky/20 border-hoshii-earth/20",children:(0,a.jsxs)(o,{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-5",children:[(0,a.jsxs)("p",{className:"text-sm text-hoshii-ink/70 font-medium",children:[s," さんの星カード"]}),(0,a.jsxs)("p",{className:"text-4xl font-bold text-hoshii-earth mt-2",children:[t," ",(0,a.jsxs)("span",{className:"text-xl font-normal text-hoshii-ink/50",children:["/ ",20]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-2.5 mb-5",children:[Array.from({length:i}).map((e,t)=>(0,a.jsx)(d.E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15,delay:.03*t},whileHover:{scale:1.1,rotate:5},className:"aspect-square flex items-center justify-center bg-gradient-to-br from-hoshii-earth to-hoshii-green rounded-2xl shadow-soft",children:(0,a.jsx)("span",{className:"text-2xl",role:"img","aria-label":"star",children:"⭐"})},"filled-".concat(t))),Array.from({length:20-i}).map((e,t)=>(0,a.jsx)("div",{className:"aspect-square flex items-center justify-center bg-white border-2 border-dashed border-hoshii-earth/30 rounded-2xl",children:(0,a.jsx)("span",{className:"text-xl opacity-20",children:"⭐"})},"empty-".concat(t)))]}),(0,a.jsx)("div",{className:"text-center bg-hoshii-mint/50 rounded-2xl py-3 px-4",children:(0,a.jsx)("p",{className:"text-sm text-hoshii-ink/70 leading-relaxed",children:t>=20?(0,a.jsx)(a.Fragment,{children:"\uD83C\uDF89 星がいっぱい！新しいカードがもらえます！"}):(0,a.jsxs)(a.Fragment,{children:["あと ",20-t," 個の星で満タン！"]})})})]})})}var m=s(495);let u=(0,s(3027).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h(e){let{className:t,variant:s,...i}=e;return(0,a.jsx)("div",{className:(0,r.cn)(u({variant:s}),t),...i})}function g(e){let{items:t,userStamps:s,onRedeem:i}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:t.map((e,t)=>{let r=s>=e.stampsCost;return(0,a.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},whileHover:{scale:1.01,y:-2},whileTap:{scale:.98},children:(0,a.jsxs)(n,{className:"kawaii-card ".concat(e.available?"":"opacity-50"),children:[(0,a.jsxs)(o,{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg leading-tight text-hoshii-ink",children:e.title}),(0,a.jsxs)(h,{variant:r?"default":"secondary",className:"flex items-center gap-1 shrink-0 rounded-full border-hoshii-earth/30 bg-hoshii-sand",children:[(0,a.jsx)("span",{className:"text-base",children:"⭐"}),(0,a.jsxs)("span",{className:"text-hoshii-ink",children:["\xd7",e.stampsCost]})]})]}),(0,a.jsx)("p",{className:"text-[15.5px] text-hoshii-ink/70 leading-relaxed mb-4",children:e.description}),(0,a.jsx)(h,{variant:"outline",className:"capitalize rounded-full bg-hoshii-sky/40 border-hoshii-sky/50 text-hoshii-ink",children:e.category})]}),(0,a.jsx)(l,{className:"p-5 pt-2",children:(0,a.jsx)(m.z,{className:"w-full",onClick:()=>i(e),disabled:!e.available||!r,children:e.available?r?"交換する":"星が足りません":"在庫なし"})})]})},e.id)})})}/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,s(8030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),p=e=>{let{open:t,onOpenChange:s,children:r}=e;return(i.useEffect(()=>{let e=e=>{"Escape"===e.key&&s(!1)};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,s]),t)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:()=>s(!1)}),r]}):null},x=i.forwardRef((e,t)=>{let{className:s,children:i,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("relative z-50 w-full max-w-lg rounded-lg border bg-background p-6 shadow-lg",s),...n,children:i})});x.displayName="DialogContent";let v=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};v.displayName="DialogHeader";let b=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("h2",{ref:t,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",s),...i})});b.displayName="DialogTitle";let y=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...i})});y.displayName="DialogDescription";let j=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};j.displayName="DialogFooter",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsxs)("button",{ref:t,className:(0,r.cn)("absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",s),...i,children:[(0,a.jsx)(f,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})}).displayName="DialogClose",i.forwardRef((e,t)=>{let{className:s,children:i,...n}=e;return(0,a.jsx)("button",{ref:t,className:(0,r.cn)(s),...n,children:i})}).displayName="DialogTrigger";class N{getData(){let e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):this.getDefaultData()}saveData(e){localStorage.setItem(this.storageKey,JSON.stringify(e))}getDefaultData(){let e=new Date().toISOString();return{users:[{id:"user-1",name:"Alex Chen",email:"alex@demo.com",stamps:15,orgId:"demo",createdAt:e},{id:"user-2",name:"田中 花子",email:"hanako@demo.com",stamps:8,orgId:"demo",createdAt:e},{id:"user-3",name:"佐藤 太郎",email:"taro@demo.com",stamps:12,orgId:"demo",createdAt:e}],actions:[{id:"action-1",title:"Take a mindful walk",description:"Step outside for a 10-minute walk and observe your surroundings",domain:"wellbeing",stampsValue:1,suggestedFor:"user-1",createdAt:e},{id:"action-2",title:"Use reusable container",description:"Bring your own container for lunch today",domain:"environment",stampsValue:1,suggestedFor:"user-1",createdAt:e},{id:"action-3",title:"Share a skill",description:"Teach a colleague something you know",domain:"community",stampsValue:1,suggestedFor:"user-1",createdAt:e},{id:"action-4",title:"Learn something new",description:"Complete a 15-minute online tutorial",domain:"learning",stampsValue:1,createdAt:e},{id:"action-5",title:"Stretch break",description:"Take a 5-minute stretch break",domain:"health",stampsValue:1,createdAt:e}],actionLogs:[],events:[{id:"event-1",title:"Community Garden Day",time:"2025-10-20T14:00:00Z",place:"City Garden, Block A",domain:"environment",stamps:1,description:"Join us for a community gardening session. Help plant vegetables and flowers!",orgId:"demo",createdAt:e},{id:"event-2",title:"Wellness Workshop",time:"2025-10-18T10:00:00Z",place:"Office Conference Room",domain:"wellbeing",stamps:1,description:"Learn stress management techniques and mindfulness practices.",orgId:"demo",createdAt:e}],eventParticipations:[],redeemItems:[{id:"item-1",title:"Coffee Voucher",description:"Get a free coffee at our cafe",stampsCost:5,category:"food",available:!0},{id:"item-2",title:"Tree Planting Donation",description:"Plant a tree in your name",stampsCost:10,category:"environment",available:!0},{id:"item-3",title:"Yoga Class Pass",description:"One free yoga class",stampsCost:8,category:"wellness",available:!0},{id:"item-4",title:"Book Voucher",description:"$20 voucher for our bookstore",stampsCost:15,category:"learning",available:!0},{id:"item-5",title:"Charity Donation",description:"Donate to a local charity",stampsCost:20,category:"community",available:!0}],redemptions:[]}}getCurrentUser(){return this.getData().users[0]||null}getAllUsers(){return this.getData().users}deleteUser(e){let t=this.getData(),s=t.users.findIndex(t=>t.id===e);return -1!==s&&(t.users.splice(s,1),t.actionLogs=t.actionLogs.filter(t=>t.userId!==e),t.eventParticipations=t.eventParticipations.filter(t=>t.userId!==e),t.redemptions=t.redemptions.filter(t=>t.userId!==e),this.saveData(t),!0)}updateUserStamps(e,t){let s=this.getData(),a=s.users.find(t=>t.id===e);a&&(a.stamps=t,this.saveData(s))}getActions(){return this.getData().actions}getActionById(e){return this.getData().actions.find(t=>t.id===e)||null}getTodaysSuggestedActions(){let e=this.getCurrentUser();return e?this.getData().actions.filter(t=>t.suggestedFor===e.id).slice(0,3):[]}createAction(e){let t=this.getData(),s={...e,id:"action-".concat(Date.now()),createdAt:new Date().toISOString()};return t.actions.push(s),this.saveData(t),s}getActionLogs(){return this.getData().actionLogs}getUserActionLogs(e){return this.getData().actionLogs.filter(t=>t.userId===e)}completeAction(e,t,s,a){let i=this.getData(),r={id:"log-".concat(Date.now()),userId:e,actionId:t,completedAt:new Date().toISOString(),stampsAwarded:s,imageUrl:a};i.actionLogs.push(r);let n=i.users.find(t=>t.id===e);return n&&(n.stamps+=s),this.saveData(i),r}getEvents(){return this.getData().events}getEventById(e){return this.getData().events.find(t=>t.id===e)||null}createEvent(e){let t=this.getData(),s={...e,id:"event-".concat(Date.now()),createdAt:new Date().toISOString()};return t.events.push(s),this.saveData(t),s}getEventParticipations(){return this.getData().eventParticipations}getUserEventParticipations(e){return this.getData().eventParticipations.filter(t=>t.userId===e)}joinEvent(e,t){let s=this.getData(),a={id:"participation-".concat(Date.now()),eventId:t,userId:e,joinedAt:new Date().toISOString()};return s.eventParticipations.push(a),this.saveData(s),a}completeEvent(e,t,s,a){let i=this.getData(),r=i.eventParticipations.find(s=>s.userId===e&&s.eventId===t);if(r){r.completedAt=new Date().toISOString(),r.stampsAwarded=s,r.imageUrl=a;let t=i.users.find(t=>t.id===e);t&&(t.stamps+=s),this.saveData(i)}return r}getRedeemItems(){return this.getData().redeemItems}getRedeemItemById(e){return this.getData().redeemItems.find(t=>t.id===e)||null}getRedemptions(){return this.getData().redemptions}getUserRedemptions(e){return this.getData().redemptions.filter(t=>t.userId===e)}redeemItem(e,t,s){let a=this.getData(),i=a.users.find(t=>t.id===e);if(!i||i.stamps<s)throw Error("Insufficient stamps");let r={id:"redemption-".concat(Date.now()),userId:e,itemId:t,redeemedAt:new Date().toISOString(),stampsSpent:s,status:"pending"};return a.redemptions.push(r),i.stamps-=s,this.saveData(a),r}getOrgTotalStamps(e){return this.getData().users.filter(t=>t.orgId===e).reduce((e,t)=>e+t.stamps,0)}getOrgDomainBreakdown(e){let t=this.getData(),s=t.users.filter(t=>t.orgId===e).map(e=>e.id),a={health:0,environment:0,community:0,learning:0,wellbeing:0};return t.actionLogs.forEach(e=>{if(s.includes(e.userId)){let s=t.actions.find(t=>t.id===e.actionId);s&&(a[s.domain]+=e.stampsAwarded)}}),t.eventParticipations.forEach(e=>{if(s.includes(e.userId)&&e.completedAt){let s=t.events.find(t=>t.id===e.eventId);s&&(a[s.domain]+=e.stampsAwarded||0)}}),a}getOrgMonthlyTrend(e){let t=this.getData(),s=t.users.filter(t=>t.orgId===e).map(e=>e.id),a={};return t.actionLogs.forEach(e=>{if(s.includes(e.userId)){let t=e.completedAt.substring(0,7);a[t]=(a[t]||0)+e.stampsAwarded}}),t.eventParticipations.forEach(e=>{if(s.includes(e.userId)&&e.completedAt){let t=e.completedAt.substring(0,7);a[t]=(a[t]||0)+(e.stampsAwarded||0)}}),Object.entries(a).map(e=>{let[t,s]=e;return{month:t,stamps:s}}).sort((e,t)=>e.month.localeCompare(t.month))}constructor(){this.storageKey="hoshii_data"}}let w=new N;var D=s(6997);function k(){let[e,t]=(0,i.useState)(null),[s,r]=(0,i.useState)([]),[n,o]=(0,i.useState)(null),[l,d]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{t(w.getCurrentUser()),r(w.getRedeemItems())},[]),e)?(0,a.jsxs)("div",{className:"container max-w-2xl mx-auto px-5 md:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)(D.Z,{className:"h-6 w-6 text-hoshii-green",strokeWidth:1.5}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-hoshii-ink",children:"星で交換"})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(c,{stamps:e.stamps,userName:e.name})}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-5 text-hoshii-ink",children:"\uD83C\uDF1F 交換できる景品"}),(0,a.jsx)(g,{items:s,userStamps:e.stamps,onRedeem:e=>{o(e)}}),(0,a.jsx)(p,{open:!!n,onOpenChange:()=>o(null),children:(0,a.jsxs)(x,{children:[(0,a.jsxs)(v,{children:[(0,a.jsx)(b,{children:"交換確認"}),(0,a.jsx)(y,{children:"本当にこのアイテムと交換しますか？"})]}),n&&(0,a.jsxs)("div",{className:"py-4",children:[(0,a.jsx)("p",{className:"font-semibold text-lg mb-2",children:n.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:n.description}),(0,a.jsxs)("p",{className:"text-sm flex items-center gap-2",children:["必要な星: ",(0,a.jsx)("span",{className:"text-2xl",children:"⭐"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:["\xd7",n.stampsCost]})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-2 mt-2",children:["残り: ",(0,a.jsx)("span",{className:"text-xl",children:"⭐"}),(0,a.jsxs)("span",{className:"font-semibold",children:["\xd7",e.stamps-n.stampsCost]})]})]}),(0,a.jsxs)(j,{children:[(0,a.jsx)(m.z,{variant:"outline",onClick:()=>o(null),children:"キャンセル"}),(0,a.jsx)(m.z,{onClick:()=>{if(e&&n)try{w.redeemItem(e.id,n.id,n.stampsCost);let s=w.getCurrentUser();t(s),o(null),d(!0)}catch(e){console.error("Redemption failed:",e)}},className:"bg-gradient-to-r from-purple-500 to-pink-500",children:"交換する"})]})]})}),(0,a.jsx)(p,{open:l,onOpenChange:d,children:(0,a.jsxs)(x,{children:[(0,a.jsxs)(v,{children:[(0,a.jsx)(b,{children:"交換成功！\uD83C\uDF89"}),(0,a.jsx)(y,{children:"景品の交換が完了しました"})]}),(0,a.jsxs)("div",{className:"py-4 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF81"}),(0,a.jsx)("p",{className:"text-lg",children:"メールで受け取り方法をご確認ください"})]}),(0,a.jsx)(j,{children:(0,a.jsx)(m.z,{onClick:()=>d(!1),className:"w-full",children:"閉じる"})})]})})]}):(0,a.jsx)("div",{className:"container max-w-2xl mx-auto px-4 py-6",children:(0,a.jsx)("p",{className:"text-center text-muted-foreground",children:"読み込み中..."})})}},495:function(e,t,s){"use strict";s.d(t,{z:function(){return l}});var a=s(7437),i=s(2265),r=s(3027),n=s(7440);let o=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-hoshii-green focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{default:"bg-hoshii-green hover:brightness-95 text-hoshii-ink shadow-soft",destructive:"bg-hoshii-rose text-hoshii-ink hover:brightness-95 shadow-soft",outline:"border border-black/8 bg-white hover:bg-hoshii-green2 shadow-soft",secondary:"bg-white border border-black/8 hover:bg-hoshii-green2 shadow-soft",ghost:"hover:bg-hoshii-mint",link:"text-hoshii-green underline-offset-4 hover:underline"},size:{default:"h-11 px-6 py-2.5",sm:"h-9 rounded-full px-4 text-sm",lg:"h-13 rounded-full px-8 text-lg",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),l=i.forwardRef((e,t)=>{let{className:s,variant:i,size:r,...l}=e;return(0,a.jsx)("button",{className:(0,n.cn)(o({variant:i,size:r,className:s})),ref:t,...l})});l.displayName="Button"},7440:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(4839),i=s(6164);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.m6)((0,a.W)(t))}},6997:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},3027:function(e,t,s){"use strict";s.d(t,{j:function(){return n}});var a=s(4839);let i=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,r=a.W,n=(e,t)=>s=>{var a;if((null==t?void 0:t.variants)==null)return r(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:n,defaultVariants:o}=t,l=Object.keys(n).map(e=>{let t=null==s?void 0:s[e],a=null==o?void 0:o[e];if(null===t)return null;let r=i(t)||i(a);return n[e][r]}),d=s&&Object.entries(s).reduce((e,t)=>{let[s,a]=t;return void 0===a||(e[s]=a),e},{});return r(e,l,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:s,className:a,...i}=t;return Object.entries(i).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...o,...d}[t]):({...o,...d})[t]===s})?[...e,s,a]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}},function(e){e.O(0,[513,502,971,23,744],function(){return e(e.s=7048)}),_N_E=e.O()}]);